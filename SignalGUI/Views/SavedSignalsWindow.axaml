<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:SignalGUI.ViewModels"
        xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        x:Class="SignalGUI.Views.SavedSignalsWindow"
        x:DataType="vm:CompositeComponentViewModel"
        Title="Saved Signals"
        Width="500" Height="400"
        MinWidth="400" MinHeight="300"
        WindowStartupLocation="CenterOwner">

  <DockPanel Margin="20">
    <StackPanel DockPanel.Dock="Top" Margin="0,0,0,20">
        <TextBlock Text="Search Saved Signals"
                   FontSize="16"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,10"/>
        <TextBox x:Name="SearchTextBox"
                 Text="{Binding SearchText, Mode=TwoWay}"
                 Watermark="Enter search term..."
                 Margin="0,0,0,10"/>
    </StackPanel>

    <Button x:Name="CloseButton"
            Content="Close"
            Width="80"
            Height="30"
            HorizontalAlignment="Right"
            Click="CloseButton_Click"
            DockPanel.Dock="Bottom"/>

    <ScrollViewer Margin="0,0,0,20">
      <ItemsControl ItemsSource="{Binding FilteredGuiInstances}">
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <Border Background="Transparent" Margin="0,2" Padding="5" CornerRadius="3" BorderBrush="Gray" BorderThickness="1">
              <Grid ColumnDefinitions="2*, Auto, Auto">
                <TextBox Text="{Binding ObjectName, Mode=TwoWay}"
                         VerticalAlignment="Center"
                         Margin="0,0,5,0"/>
                <Button Grid.Column="1"
                        Content="Load"
                        Command="{Binding $parent[Window].DataContext.LoadSpecificGuiInstanceCommand}"
                        CommandParameter="{Binding .}"
                        Width="60" Height="30"
                        Margin="2,0"
                        Background="LightBlue"
                        Foreground="Black"/>
                <Button Grid.Column="2"
                        Content="Remove"
                        Command="{Binding $parent[Window].DataContext.RemoveGuiInstanceCommand}"
                        CommandParameter="{Binding .}"
                        Width="70" Height="30"
                        Margin="5,0,0,0"
                        Background="LightCoral"
                        Foreground="Black"/>
              </Grid>
            </Border>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </ScrollViewer>
  </DockPanel>
</Window>